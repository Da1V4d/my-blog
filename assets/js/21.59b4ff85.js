(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{306:function(t,s,a){t.exports=a.p+"assets/img/image-20240404134805703.210a8e71.png"},307:function(t,s,a){t.exports=a.p+"assets/img/image-20240404135046625.ebfb454d.png"},308:function(t,s,a){t.exports=a.p+"assets/img/image-20240404142256074.91620331.png"},309:function(t,s,a){t.exports=a.p+"assets/img/image-20240404152250773.8010d938.png"},359:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"springboot项目部署到服务器-使用docker半自动化部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot项目部署到服务器-使用docker半自动化部署"}},[t._v("#")]),t._v(" Springboot项目部署到服务器-使用docker半自动化部署")]),t._v(" "),s("h3",{attrs:{id:"使用maven打包项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用maven打包项目"}},[t._v("#")]),t._v(" 使用Maven打包项目")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("导入依赖")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-maven-plugin"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.6.13"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("resource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("directory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("src/main/resources"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("directory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("includes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("static/**"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("**/*.properties"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("**/*.xml"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("**/*.yml"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("includes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("resource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("运行打包")]),t._v(" "),s("p",[s("img",{attrs:{src:a(306),alt:"image-20240404134805703"}})])]),t._v(" "),s("li",[s("p",[t._v("运行命令")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" order-1.0-SNAPSHOT.jar\n")])])])]),t._v(" "),s("li",[s("p",[t._v("成功运行")]),t._v(" "),s("p",[s("img",{attrs:{src:a(307),alt:"image-20240404135046625"}})])])]),t._v(" "),s("h3",{attrs:{id:"上传到服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传到服务器"}},[t._v("#")]),t._v(" 上传到服务器")]),t._v(" "),s("p",[s("img",{attrs:{src:a(308),alt:"image-20240404142256074"}})]),t._v(" "),s("h3",{attrs:{id:"手动启动项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动启动项目"}},[t._v("#")]),t._v(" 手动启动项目")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("命令行启动项目")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home/daiwei/study/SoftwareEngineeringCourseDesign/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" order-1.0-SNAPSHOT.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("停止进程")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pkill")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java.*order-1.0-SNAPSHOT.jar'")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"使用docker运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用docker运行"}},[t._v("#")]),t._v(" 使用docker运行")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("创建或准备Dockerfile")]),t._v("： 在本地计算机的某个目录下创建一个名为 "),s("code",[t._v("Dockerfile")]),t._v(" 的文本文件（无扩展名），并在其中编写构建镜像所需的各种指令，例如指定基础镜像、复制文件、安装依赖、设置环境变量、指定运行命令等。")]),t._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用官方的Java运行时镜像作为基础镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" openjdk:11-jdk-slim")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置工作目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" /home/daiwei/study/SoftwareEngineeringCourseDesign/")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 复制应用的jar文件到容器的指定目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" order-1.0-SNAPSHOT.jar .")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保持端口对外开放")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXPOSE")]),t._v(" 8888  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 假设应用监听8080端口，根据实际情况调整")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用nohup和&符号让Java应用在后台运行，并忽略挂断信号")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果你的Spring Boot应用支持运行时参数(--spring.profiles.active=prod)，这里可以根据需要添加")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CMD")]),t._v(" ["),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nohup"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-jar"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"order-1.0-SNAPSHOT.jar"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"&"')]),t._v("]")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("构建镜像")]),t._v("： 打开命令行终端，导航到包含Dockerfile的目录，然后运行 "),s("code",[t._v("docker build")]),t._v(" 命令。命令的基本格式如下：")]),t._v(" "),s("p",[t._v("Sh")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build /home/daiwei/study/SoftwareEngineeringCourseDesign "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" order\n")])])]),s("p",[t._v("其中，")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-t")]),t._v(" 参数后面跟随的是你要赋予新镜像的名字和标签，例如 "),s("code",[t._v("my-app:v1.0")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("[options]")]),t._v(" 可以包括诸如 "),s("code",[t._v("--build-arg")]),t._v(" 传递构建参数、"),s("code",[t._v("--file")]),t._v(" ("),s("code",[t._v("-f")]),t._v(") 指定Dockerfile路径（如果Dockerfile不在当前目录下）等选项。")]),t._v(" "),s("li",[t._v("最后的 "),s("code",[t._v(".")]),t._v(" 表示Dockerfile就在当前目录下。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("查看构建过程和结果")]),t._v("： 当你运行 "),s("code",[t._v("docker build")]),t._v(" 命令后，Docker会根据Dockerfile中的指令逐步构建镜像。构建过程中，Docker会展示每一步的操作和结果。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(309),alt:"image-20240404152250773"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("运行新构建的镜像")]),t._v("： 构建完成后，你可以使用 "),s("code",[t._v("docker run")]),t._v(" 命令来运行新构建的镜像：")]),t._v(" "),s("p",[t._v("Sh")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" order-dv "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),t._v(":8888 order\n")])])]),s("p",[t._v("例如，如果你的Dockerfile中定义的应用监听在8888端口，并且你希望宿主机的80端口映射到容器的8888端口：")])]),t._v(" "),s("li",[s("p",[t._v("停止Docker运行实例")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);