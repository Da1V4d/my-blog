<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Springboot项目部署到服务器-使用docker半自动化部署</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.efb577fc.css" as="style"><link rel="preload" href="/assets/js/app.645a3e1c.js" as="script"><link rel="preload" href="/assets/js/2.5d18bbeb.js" as="script"><link rel="preload" href="/assets/js/1.df7d35d1.js" as="script"><link rel="preload" href="/assets/js/21.59b4ff85.js" as="script"><link rel="prefetch" href="/assets/js/10.e87c6b6e.js"><link rel="prefetch" href="/assets/js/11.73c1b871.js"><link rel="prefetch" href="/assets/js/12.597f199b.js"><link rel="prefetch" href="/assets/js/13.a77b9daa.js"><link rel="prefetch" href="/assets/js/14.b6326994.js"><link rel="prefetch" href="/assets/js/15.d846de7b.js"><link rel="prefetch" href="/assets/js/16.6e08df81.js"><link rel="prefetch" href="/assets/js/17.6c0932d5.js"><link rel="prefetch" href="/assets/js/18.1bfa6a8b.js"><link rel="prefetch" href="/assets/js/19.a60fd20c.js"><link rel="prefetch" href="/assets/js/20.4d0021f4.js"><link rel="prefetch" href="/assets/js/22.92e6f01e.js"><link rel="prefetch" href="/assets/js/23.a7a822cb.js"><link rel="prefetch" href="/assets/js/24.e306355a.js"><link rel="prefetch" href="/assets/js/25.ee56b1bb.js"><link rel="prefetch" href="/assets/js/26.b247ef81.js"><link rel="prefetch" href="/assets/js/27.87fdbf94.js"><link rel="prefetch" href="/assets/js/28.b47426c1.js"><link rel="prefetch" href="/assets/js/29.bbdba65d.js"><link rel="prefetch" href="/assets/js/3.1f33f2b0.js"><link rel="prefetch" href="/assets/js/30.cef4f27b.js"><link rel="prefetch" href="/assets/js/31.47bbe650.js"><link rel="prefetch" href="/assets/js/32.51799d64.js"><link rel="prefetch" href="/assets/js/33.5d8ca237.js"><link rel="prefetch" href="/assets/js/34.dec104c1.js"><link rel="prefetch" href="/assets/js/35.51c1cdef.js"><link rel="prefetch" href="/assets/js/36.42260446.js"><link rel="prefetch" href="/assets/js/37.f61130ee.js"><link rel="prefetch" href="/assets/js/38.666f824e.js"><link rel="prefetch" href="/assets/js/39.202a7b5a.js"><link rel="prefetch" href="/assets/js/4.e830cca7.js"><link rel="prefetch" href="/assets/js/40.c434bf45.js"><link rel="prefetch" href="/assets/js/41.04bef513.js"><link rel="prefetch" href="/assets/js/42.a842225d.js"><link rel="prefetch" href="/assets/js/43.f9b99a58.js"><link rel="prefetch" href="/assets/js/44.8d8100ab.js"><link rel="prefetch" href="/assets/js/45.7d8523a4.js"><link rel="prefetch" href="/assets/js/46.fc315e02.js"><link rel="prefetch" href="/assets/js/47.2cb1e2c1.js"><link rel="prefetch" href="/assets/js/48.ecb93eec.js"><link rel="prefetch" href="/assets/js/49.9abde7fa.js"><link rel="prefetch" href="/assets/js/5.58154627.js"><link rel="prefetch" href="/assets/js/50.476dadf5.js"><link rel="prefetch" href="/assets/js/51.da4909c3.js"><link rel="prefetch" href="/assets/js/52.b861f67e.js"><link rel="prefetch" href="/assets/js/53.26dec592.js"><link rel="prefetch" href="/assets/js/54.9b2795c8.js"><link rel="prefetch" href="/assets/js/55.7c8ab61f.js"><link rel="prefetch" href="/assets/js/56.cb2ad6c7.js"><link rel="prefetch" href="/assets/js/57.f863ad19.js"><link rel="prefetch" href="/assets/js/58.c5221be6.js"><link rel="prefetch" href="/assets/js/59.e4c86eb7.js"><link rel="prefetch" href="/assets/js/6.2b51ff82.js"><link rel="prefetch" href="/assets/js/60.4c603b82.js"><link rel="prefetch" href="/assets/js/61.a8a625dd.js"><link rel="prefetch" href="/assets/js/62.72571a11.js"><link rel="prefetch" href="/assets/js/63.e679c335.js"><link rel="prefetch" href="/assets/js/64.896a7462.js"><link rel="prefetch" href="/assets/js/65.a0cd39de.js"><link rel="prefetch" href="/assets/js/66.08b7b72f.js"><link rel="prefetch" href="/assets/js/7.84e8a21c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.388e9760.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efb577fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="springboot项目部署到服务器-使用docker半自动化部署"><a href="#springboot项目部署到服务器-使用docker半自动化部署" class="header-anchor">#</a> Springboot项目部署到服务器-使用docker半自动化部署</h1> <h3 id="使用maven打包项目"><a href="#使用maven打包项目" class="header-anchor">#</a> 使用Maven打包项目</h3> <ul><li><p>导入依赖</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>static/**<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>运行打包</p> <p><img src="/assets/img/image-20240404134805703.210a8e71.png" alt="image-20240404134805703"></p></li> <li><p>运行命令</p> <div class="language-sh extra-class"><pre class="language-sh"><code> <span class="token function">java</span> <span class="token parameter variable">-jar</span> order-1.0-SNAPSHOT.jar
</code></pre></div></li> <li><p>成功运行</p> <p><img src="/assets/img/image-20240404135046625.ebfb454d.png" alt="image-20240404135046625"></p></li></ul> <h3 id="上传到服务器"><a href="#上传到服务器" class="header-anchor">#</a> 上传到服务器</h3> <p><img src="/assets/img/image-20240404142256074.91620331.png" alt="image-20240404142256074"></p> <h3 id="手动启动项目"><a href="#手动启动项目" class="header-anchor">#</a> 手动启动项目</h3> <ol><li><p>命令行启动项目</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /home/daiwei/study/SoftwareEngineeringCourseDesign/
<span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> order-1.0-SNAPSHOT.jar <span class="token operator">&amp;</span>
</code></pre></div></li> <li><p>停止进程</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pkill</span> <span class="token parameter variable">-f</span> <span class="token string">'java.*order-1.0-SNAPSHOT.jar'</span>
</code></pre></div></li></ol> <h3 id="使用docker运行"><a href="#使用docker运行" class="header-anchor">#</a> 使用docker运行</h3> <ol><li><p><strong>创建或准备Dockerfile</strong>： 在本地计算机的某个目录下创建一个名为 <code>Dockerfile</code> 的文本文件（无扩展名），并在其中编写构建镜像所需的各种指令，例如指定基础镜像、复制文件、安装依赖、设置环境变量、指定运行命令等。</p> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token comment"># 使用官方的Java运行时镜像作为基础镜像</span>
<span class="token instruction"><span class="token keyword">FROM</span> openjdk:11-jdk-slim</span>

<span class="token comment"># 设置工作目录</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /home/daiwei/study/SoftwareEngineeringCourseDesign/</span>

<span class="token comment"># 复制应用的jar文件到容器的指定目录</span>
<span class="token instruction"><span class="token keyword">COPY</span> order-1.0-SNAPSHOT.jar .</span>

<span class="token comment"># 保持端口对外开放</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 8888  </span>
<span class="token comment"># 假设应用监听8080端口，根据实际情况调整</span>
<span class="token comment"># 使用nohup和&amp;符号让Java应用在后台运行，并忽略挂断信号</span>
<span class="token comment"># 如果你的Spring Boot应用支持运行时参数(--spring.profiles.active=prod)，这里可以根据需要添加</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;nohup&quot;</span>, <span class="token string">&quot;java&quot;</span>, <span class="token string">&quot;-jar&quot;</span>, <span class="token string">&quot;order-1.0-SNAPSHOT.jar&quot;</span>, <span class="token string">&quot;&amp;&quot;</span>]</span>
</code></pre></div></li> <li><p><strong>构建镜像</strong>： 打开命令行终端，导航到包含Dockerfile的目录，然后运行 <code>docker build</code> 命令。命令的基本格式如下：</p> <p>Sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">docker</span> build /home/daiwei/study/SoftwareEngineeringCourseDesign <span class="token parameter variable">-t</span> order
</code></pre></div><p>其中，</p> <ul><li><code>-t</code> 参数后面跟随的是你要赋予新镜像的名字和标签，例如 <code>my-app:v1.0</code>。</li> <li><code>[options]</code> 可以包括诸如 <code>--build-arg</code> 传递构建参数、<code>--file</code> (<code>-f</code>) 指定Dockerfile路径（如果Dockerfile不在当前目录下）等选项。</li> <li>最后的 <code>.</code> 表示Dockerfile就在当前目录下。</li></ul></li> <li><p><strong>查看构建过程和结果</strong>： 当你运行 <code>docker build</code> 命令后，Docker会根据Dockerfile中的指令逐步构建镜像。构建过程中，Docker会展示每一步的操作和结果。</p> <p><img src="/assets/img/image-20240404152250773.8010d938.png" alt="image-20240404152250773"></p></li> <li><p><strong>运行新构建的镜像</strong>： 构建完成后，你可以使用 <code>docker run</code> 命令来运行新构建的镜像：</p> <p>Sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> order-dv <span class="token parameter variable">-p</span> <span class="token number">8888</span>:8888 order
</code></pre></div><p>例如，如果你的Dockerfile中定义的应用监听在8888端口，并且你希望宿主机的80端口映射到容器的8888端口：</p></li> <li><p>停止Docker运行实例</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.645a3e1c.js" defer></script><script src="/assets/js/2.5d18bbeb.js" defer></script><script src="/assets/js/1.df7d35d1.js" defer></script><script src="/assets/js/21.59b4ff85.js" defer></script>
  </body>
</html>
